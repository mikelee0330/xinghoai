# AI æœå‹™é…ç½®èªªæ˜

## ğŸ“‹ æ¦‚è¿°

æœ¬å°ˆæ¡ˆä½¿ç”¨ **Lovable AI** ä½œç‚ºä¸»è¦çš„ AI æœå‹™æä¾›å•†ï¼Œé€é Edge Functions å¯¦ç¾ AI åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
- å“ç‰Œå…§å®¹ç”Ÿæˆ
- å“ç‰Œåˆ†æ
- å¤šèªè¨€å…§å®¹ç”Ÿæˆ
- å¤šå¹³å°å…§å®¹é©é…

---

## ğŸ¤– ä½¿ç”¨çš„ AI æ¨¡å‹

### Lovable AI æ”¯æ´æ¨¡å‹

æœ¬å°ˆæ¡ˆå¯ä½¿ç”¨ä»¥ä¸‹ AI æ¨¡å‹ï¼ˆç„¡éœ€é¡å¤– API Keyï¼‰ï¼š

#### Google Gemini ç³»åˆ—

1. **google/gemini-2.5-pro**
   - **ç‰¹é»**ï¼šGemini å®¶æ—ä¸­æœ€å¼·å¤§çš„æ¨¡å‹
   - **é©ç”¨å ´æ™¯**ï¼š
     - è¤‡é›œçš„å“ç‰Œåˆ†æ
     - éœ€è¦æ·±åº¦ç†è§£çš„å…§å®¹ç”Ÿæˆ
     - å¤šæ¨¡æ…‹è¼¸å…¥ï¼ˆåœ–æ–‡çµåˆï¼‰
     - å¤§å‹ä¸Šä¸‹æ–‡è™•ç†
   - **Token é™åˆ¶**ï¼šæœ€é«˜
   - **æˆæœ¬**ï¼šè¼ƒé«˜
   - **é€Ÿåº¦**ï¼šè¼ƒæ…¢

2. **google/gemini-2.5-flash**ï¼ˆæ¨è–¦ç”¨æ–¼æœ¬å°ˆæ¡ˆï¼‰
   - **ç‰¹é»**ï¼šå¹³è¡¡æ€§èƒ½èˆ‡æˆæœ¬
   - **é©ç”¨å ´æ™¯**ï¼š
     - ä¸€èˆ¬å…§å®¹ç”Ÿæˆ
     - å“ç‰Œåˆ†æ
     - å¤šèªè¨€ç¿»è­¯
     - æ—¥å¸¸ AI ä»»å‹™
   - **Token é™åˆ¶**ï¼šä¸­ç­‰
   - **æˆæœ¬**ï¼šä¸­ç­‰
   - **é€Ÿåº¦**ï¼šä¸­ç­‰

3. **google/gemini-2.5-flash-lite**
   - **ç‰¹é»**ï¼šæœ€å¿«é€Ÿä¸”æœ€ç¶“æ¿Ÿ
   - **é©ç”¨å ´æ™¯**ï¼š
     - ç°¡å–®çš„æ–‡æœ¬åˆ†é¡
     - æ‘˜è¦ç”Ÿæˆ
     - é—œéµå­—æå–
     - é«˜é »ç‡ç°¡å–®ä»»å‹™
   - **Token é™åˆ¶**ï¼šè¼ƒä½
   - **æˆæœ¬**ï¼šæœ€ä½
   - **é€Ÿåº¦**ï¼šæœ€å¿«

#### OpenAI GPT ç³»åˆ—

4. **openai/gpt-5**
   - **ç‰¹é»**ï¼šå¼·å¤§çš„é€šç”¨æ¨¡å‹ï¼Œæ¨ç†èƒ½åŠ›å„ªç§€
   - **é©ç”¨å ´æ™¯**ï¼š
     - éœ€è¦é«˜ç²¾ç¢ºåº¦çš„å…§å®¹ç”Ÿæˆ
     - è¤‡é›œçš„å‰µæ„å¯«ä½œ
     - éœ€è¦ç´°è†©èªè¨€è™•ç†
   - **Token é™åˆ¶**ï¼šé«˜
   - **æˆæœ¬**ï¼šé«˜
   - **é€Ÿåº¦**ï¼šè¼ƒæ…¢

5. **openai/gpt-5-mini**
   - **ç‰¹é»**ï¼šæ€§åƒ¹æ¯”é«˜ï¼Œä¿ç•™å¤§éƒ¨åˆ† GPT-5 èƒ½åŠ›
   - **é©ç”¨å ´æ™¯**ï¼š
     - ä¸€èˆ¬å…§å®¹ç”Ÿæˆ
     - å°è©±å¼ AI
     - å¤šè¼ªå°è©±
   - **Token é™åˆ¶**ï¼šä¸­ç­‰
   - **æˆæœ¬**ï¼šä¸­ç­‰
   - **é€Ÿåº¦**ï¼šä¸­ç­‰

6. **openai/gpt-5-nano**
   - **ç‰¹é»**ï¼šå°ˆç‚ºé«˜é€Ÿä½æˆæœ¬è¨­è¨ˆ
   - **é©ç”¨å ´æ™¯**ï¼š
     - é«˜ä¸¦ç™¼è«‹æ±‚
     - ç°¡å–®æ–‡æœ¬è™•ç†
     - å¯¦æ™‚äº’å‹•å ´æ™¯
   - **Token é™åˆ¶**ï¼šè¼ƒä½
   - **æˆæœ¬**ï¼šä½
   - **é€Ÿåº¦**ï¼šå¿«

---

## ğŸ“‚ AI ç›¸é—œç¨‹å¼æª”æ¡ˆ

### Edge Functions

ä½æ–¼ `supabase/functions/` ç›®éŒ„ï¼š

#### 1. `generate-content/index.ts`
**åŠŸèƒ½**ï¼šAI å…§å®¹ç”Ÿæˆä¸»è¦é‚è¼¯

**è¼¸å…¥åƒæ•¸**ï¼š
```typescript
{
  keywords: string;          // é—œéµå­—
  contentDirection: string;  // å…§å®¹æ–¹å‘
  platform: string;          // å¹³å°ï¼ˆFacebook, Instagram ç­‰ï¼‰
  contentType: string;       // å…§å®¹é¡å‹ï¼ˆè²¼æ–‡ã€é™æ™‚å‹•æ…‹ç­‰ï¼‰
  tone: string;              // èªèª¿ï¼ˆå°ˆæ¥­ã€è¼•é¬†ç­‰ï¼‰
  brandId?: string;          // å“ç‰Œ IDï¼ˆå¯é¸ï¼‰
  framework?: string;        // æ¡†æ¶ï¼ˆå¯é¸ï¼‰
}
```

**ä¸»è¦æµç¨‹**ï¼š
1. é©—è­‰ç”¨æˆ¶èº«ä»½
2. æª¢æŸ¥ç”¨æˆ¶é‡‘å¹£é¤˜é¡
3. è¼‰å…¥å“ç‰Œè³‡è¨Šï¼ˆå¦‚æœæä¾›ï¼‰
4. æ§‹å»º AI Prompt
5. å‘¼å« Lovable AI API
6. æ‰£é™¤é‡‘å¹£
7. å„²å­˜ç”Ÿæˆæ­·å²
8. è¿”å›ç”Ÿæˆå…§å®¹

**ä½¿ç”¨çš„æ¨¡å‹**ï¼š`google/gemini-2.5-flash`ï¼ˆå¯åœ¨ç¨‹å¼ç¢¼ä¸­ä¿®æ”¹ï¼‰

**é‡‘å¹£æ¶ˆè€—**ï¼šæ¯æ¬¡ç”Ÿæˆ 1P

#### 2. `analyze-brand/index.ts`
**åŠŸèƒ½**ï¼šåˆ†æå“ç‰Œæ–‡ä»¶ä¸¦ç”Ÿæˆå“ç‰Œç‰¹å¾µæ‘˜è¦

**è¼¸å…¥åƒæ•¸**ï¼š
```typescript
{
  brandName: string;         // å“ç‰Œåç¨±
  targetAudience?: string;   // ç›®æ¨™å—çœ¾
  brandTone?: string;        // å“ç‰Œèªèª¿
  additionalNotes?: string;  // é¡å¤–èªªæ˜
  brandFiles?: string[];     // å“ç‰Œæ–‡ä»¶ URLs
}
```

**ä¸»è¦æµç¨‹**ï¼š
1. é©—è­‰ç”¨æˆ¶èº«ä»½
2. ä¸‹è¼‰ä¸¦è®€å–å“ç‰Œæ–‡ä»¶
3. æ§‹å»ºåˆ†æ Prompt
4. å‘¼å« Lovable AI API
5. è¿”å›åˆ†æçµæœ

**ä½¿ç”¨çš„æ¨¡å‹**ï¼š`google/gemini-2.5-pro`ï¼ˆå› ç‚ºéœ€è¦è™•ç†å¤šæ¨¡æ…‹å…§å®¹ï¼‰

**é‡‘å¹£æ¶ˆè€—**ï¼šä¸æ¶ˆè€—é‡‘å¹£

#### 3. `reset-password/index.ts`
**åŠŸèƒ½**ï¼šå¯†ç¢¼é‡ç½®ï¼ˆä¸æ¶‰åŠ AIï¼‰

### å‰ç«¯çµ„ä»¶

#### 1. `src/components/ContentGenerator.tsx`
**åŠŸèƒ½**ï¼šå…§å®¹ç”Ÿæˆä»‹é¢

**ä¸»è¦åŠŸèƒ½**ï¼š
- æä¾›è¡¨å–®è¼¸å…¥ï¼ˆé—œéµå­—ã€å¹³å°ã€å…§å®¹é¡å‹ç­‰ï¼‰
- é¸æ“‡å“ç‰Œè¨­å®š
- å‘¼å« `generate-content` Edge Function
- é¡¯ç¤ºç”Ÿæˆçµæœ
- è¤‡è£½åˆ°å‰ªè²¼ç°¿åŠŸèƒ½
- æŸ¥çœ‹æ­·å²ç´€éŒ„

#### 2. `src/components/BrandSettings.tsx`
**åŠŸèƒ½**ï¼šå“ç‰Œè¨­å®šç®¡ç†

**ä¸»è¦åŠŸèƒ½**ï¼š
- ä¸Šå‚³å“ç‰Œæ–‡ä»¶
- è¨­å®šå“ç‰ŒåŸºæœ¬è³‡è¨Š
- å‘¼å« `analyze-brand` Edge Function
- å„²å­˜å“ç‰Œè¨­å®š

---

## ğŸ”§ è¨­å®šèˆ‡é…ç½®

### ç’°å¢ƒè®Šæ•¸

**åœ¨ Edge Functions ä¸­éœ€è¦çš„ç’°å¢ƒè®Šæ•¸**ï¼š

```bash
# Lovable AI API Key
LOVABLE_API_KEY=your_lovable_api_key_here

# Supabase é€£ç·šè³‡è¨Šï¼ˆè‡ªå‹•æä¾›ï¼‰
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
```

**è¨­å®šæ–¹å¼**ï¼š

ä½¿ç”¨ Lovable Cloudï¼ˆè‡ªå‹•è¨­å®šï¼‰ï¼š
- ç’°å¢ƒè®Šæ•¸æœƒè‡ªå‹•é…ç½®ï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œ

ä½¿ç”¨è‡ªè¡Œæ¶è¨­çš„ Supabaseï¼š
```bash
# è¨­å®š secret
supabase secrets set LOVABLE_API_KEY=your_key_here

# æŸ¥çœ‹æ‰€æœ‰ secrets
supabase secrets list

# åˆªé™¤ secret
supabase secrets unset LOVABLE_API_KEY
```

---

## ğŸ“ Prompt è¨­è¨ˆèˆ‡åƒæ•¸

### å…§å®¹ç”Ÿæˆ Prompt çµæ§‹

```typescript
const basePrompt = `ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„ç¤¾ç¾¤åª’é«”å…§å®¹å‰µä½œå°ˆå®¶ã€‚è«‹æ ¹æ“šä»¥ä¸‹è³‡è¨Šç”Ÿæˆå…§å®¹ï¼š

é—œéµå­—ï¼š${keywords}
å…§å®¹æ–¹å‘ï¼š${contentDirection}
å¹³å°ï¼š${platform}
å…§å®¹é¡å‹ï¼š${contentType}
èªèª¿ï¼š${tone}
èªè¨€ï¼š${language}

${brandInfo ? `å“ç‰Œè³‡è¨Šï¼š
å“ç‰Œåç¨±ï¼š${brandInfo.brand_name}
ç›®æ¨™å—çœ¾ï¼š${brandInfo.target_audience}
å“ç‰Œèªèª¿ï¼š${brandInfo.brand_tone}
å“ç‰Œåˆ†æï¼š${brandInfo.ai_analysis}
` : ''}

${framework ? `è«‹ä½¿ç”¨ä»¥ä¸‹æ¡†æ¶ï¼š${framework}` : ''}

è«‹ç”Ÿæˆä¸€æ®µé©åˆ ${platform} çš„ ${contentType}ï¼Œå…§å®¹è¦ï¼š
1. è‡ªç„¶èå…¥é—œéµå­—
2. ç¬¦åˆå¹³å°ç‰¹æ€§
3. ç¬¦åˆæŒ‡å®šèªèª¿
4. å¸å¼•ç›®æ¨™å—çœ¾
5. åŒ…å«é©ç•¶çš„ hashtagsï¼ˆå¦‚é©ç”¨ï¼‰

ç›´æ¥è¼¸å‡ºå…§å®¹ï¼Œä¸éœ€è¦é¡å¤–èªªæ˜ã€‚`;
```

### å“ç‰Œåˆ†æ Prompt çµæ§‹

```typescript
const analysisPrompt = `è«‹åˆ†æä»¥ä¸‹å“ç‰Œè³‡è¨Šä¸¦ç”Ÿæˆè©³ç´°çš„å“ç‰Œç‰¹å¾µæ‘˜è¦ï¼š

å“ç‰Œåç¨±ï¼š${brandName}
${targetAudience ? `ç›®æ¨™å—çœ¾ï¼š${targetAudience}` : ''}
${brandTone ? `å“ç‰Œèªèª¿ï¼š${brandTone}` : ''}
${additionalNotes ? `é¡å¤–èªªæ˜ï¼š${additionalNotes}` : ''}

${filesContent ? `å“ç‰Œç›¸é—œæ–‡ä»¶å…§å®¹ï¼š
${filesContent}
` : ''}

è«‹æä¾›ä»¥ä¸‹åˆ†æï¼š
1. å“ç‰Œæ ¸å¿ƒåƒ¹å€¼èˆ‡å®šä½
2. ç›®æ¨™å—çœ¾ç‰¹å¾µ
3. é©åˆçš„å…§å®¹é¢¨æ ¼èˆ‡èªèª¿
4. æ¨è–¦çš„å…§å®¹ä¸»é¡Œæ–¹å‘
5. å·®ç•°åŒ–ç«¶çˆ­å„ªå‹¢

è«‹ä»¥ç¹é«”ä¸­æ–‡è¼¸å‡ºï¼Œæ¢ç†æ¸…æ™°ã€‚`;
```

### AI æ¨¡å‹åƒæ•¸

**é€šç”¨åƒæ•¸**ï¼š
```typescript
{
  model: "google/gemini-2.5-flash",  // ä½¿ç”¨çš„æ¨¡å‹
  temperature: 0.7,                   // å‰µæ„ç¨‹åº¦ï¼ˆ0-1ï¼‰
  max_tokens: 2000,                   // æœ€å¤§è¼¸å‡ºé•·åº¦
  top_p: 0.9,                         // æ¡æ¨£åƒæ•¸
  frequency_penalty: 0.0,             // é‡è¤‡æ‡²ç½°
  presence_penalty: 0.0               // ä¸»é¡Œé‡è¤‡æ‡²ç½°
}
```

**åƒæ•¸èªªæ˜**ï¼š

- **temperature**ï¼ˆæº«åº¦ï¼‰ï¼š
  - `0.0-0.3`ï¼šè¼ƒä¿å®ˆï¼Œè¼¸å‡ºæ›´ä¸€è‡´
  - `0.4-0.7`ï¼šå¹³è¡¡å‰µæ„èˆ‡ä¸€è‡´æ€§ï¼ˆæ¨è–¦ï¼‰
  - `0.8-1.0`ï¼šæ›´æœ‰å‰µæ„ï¼Œä½†å¯èƒ½ä¸ç©©å®š

- **max_tokens**ï¼ˆæœ€å¤§ Token æ•¸ï¼‰ï¼š
  - çŸ­æ–‡æ¡ˆï¼š500-1000
  - ä¸€èˆ¬å…§å®¹ï¼š1000-2000ï¼ˆç›®å‰è¨­å®šï¼‰
  - é•·æ–‡ç« ï¼š2000-4000

- **top_p**ï¼ˆæ ¸æ¡æ¨£ï¼‰ï¼š
  - æ§åˆ¶è¼¸å‡ºçš„å¤šæ¨£æ€§
  - `0.9`ï¼šå¹³è¡¡å¤šæ¨£æ€§èˆ‡è³ªé‡ï¼ˆæ¨è–¦ï¼‰
  - `1.0`ï¼šæœ€å¤§å¤šæ¨£æ€§

### æ ¹æ“šä¸åŒå ´æ™¯èª¿æ•´åƒæ•¸

**å ´æ™¯ 1ï¼šå“ç‰Œæ–‡æ¡ˆï¼ˆéœ€è¦ç©©å®šæ€§ï¼‰**
```typescript
{
  temperature: 0.5,
  max_tokens: 1500,
  top_p: 0.85
}
```

**å ´æ™¯ 2ï¼šå‰µæ„å…§å®¹ï¼ˆéœ€è¦å‰µé€ åŠ›ï¼‰**
```typescript
{
  temperature: 0.8,
  max_tokens: 2000,
  top_p: 0.95
}
```

**å ´æ™¯ 3ï¼šå“ç‰Œåˆ†æï¼ˆéœ€è¦æº–ç¢ºæ€§ï¼‰**
```typescript
{
  temperature: 0.3,
  max_tokens: 3000,
  top_p: 0.8
}
```

---

## ğŸ”„ åˆ‡æ›åˆ°å…¶ä»– AI æœå‹™

### ä½¿ç”¨ OpenAI API

1. **å®‰è£å¥—ä»¶**ï¼ˆåœ¨ Edge Function ä¸­ï¼‰ï¼š
```typescript
import OpenAI from 'openai';

const openai = new OpenAI({
  apiKey: Deno.env.get('OPENAI_API_KEY')
});
```

2. **ä¿®æ”¹å‘¼å«æ–¹å¼**ï¼š
```typescript
const response = await openai.chat.completions.create({
  model: "gpt-4",
  messages: [
    { role: "system", content: "ä½ æ˜¯ä¸€ä½å°ˆæ¥­çš„å…§å®¹å‰µä½œè€…" },
    { role: "user", content: prompt }
  ],
  temperature: 0.7,
  max_tokens: 2000
});

const content = response.choices[0].message.content;
```

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**ï¼š
```bash
supabase secrets set OPENAI_API_KEY=sk-...
```

### ä½¿ç”¨ Anthropic Claude API

1. **å®‰è£å¥—ä»¶**ï¼š
```typescript
import Anthropic from '@anthropic-ai/sdk';

const anthropic = new Anthropic({
  apiKey: Deno.env.get('ANTHROPIC_API_KEY')
});
```

2. **ä¿®æ”¹å‘¼å«æ–¹å¼**ï¼š
```typescript
const response = await anthropic.messages.create({
  model: "claude-3-opus-20240229",
  max_tokens: 2000,
  messages: [
    { role: "user", content: prompt }
  ]
});

const content = response.content[0].text;
```

---

## ğŸ“Š ä½¿ç”¨é‡èˆ‡æˆæœ¬è¿½è¹¤

### Lovable AI ç”¨é‡è¿½è¹¤

Lovable AI ä½¿ç”¨é‡æœƒè¨ˆå…¥ Lovable Cloud çš„ç”¨é‡é™åˆ¶ï¼Œå¯åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹ï¼š
- Lovable Dashboard > Cloud > Usage

### è‡ªè¡Œè¿½è¹¤æ–¹å¼

åœ¨ Edge Function ä¸­åŠ å…¥æ—¥èªŒï¼š
```typescript
console.log({
  function: 'generate-content',
  user_id: userId,
  model: 'google/gemini-2.5-flash',
  tokens_used: response.usage?.total_tokens,
  cost: calculateCost(response.usage?.total_tokens),
  timestamp: new Date().toISOString()
});
```

---

## ğŸ§ª æ¸¬è©¦ AI åŠŸèƒ½

### æœ¬åœ°æ¸¬è©¦ Edge Function

```bash
# å•Ÿå‹•æœ¬åœ° Supabase
supabase start

# æ¸¬è©¦ generate-content function
curl -i --location --request POST \
  'http://localhost:54321/functions/v1/generate-content' \
  --header 'Authorization: Bearer YOUR_ANON_KEY' \
  --header 'Content-Type: application/json' \
  --data '{
    "keywords": "ç’°ä¿",
    "contentDirection": "æ¨å»£ç’°ä¿ç†å¿µ",
    "platform": "Facebook",
    "contentType": "è²¼æ–‡",
    "tone": "å°ˆæ¥­"
  }'
```

### æ¸¬è©¦ä¸åŒæ¨¡å‹

åœ¨ `generate-content/index.ts` ä¸­ä¿®æ”¹ï¼š
```typescript
// æ¸¬è©¦ä¸åŒæ¨¡å‹
const models = [
  'google/gemini-2.5-flash',
  'google/gemini-2.5-pro',
  'openai/gpt-5-mini'
];

// é¸æ“‡è¦æ¸¬è©¦çš„æ¨¡å‹
const selectedModel = models[0];
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å•é¡Œ 1ï¼šAI å›æ‡‰éæ…¢

**å¯èƒ½åŸå› **ï¼š
- ä½¿ç”¨äº†è¼ƒæ…¢çš„æ¨¡å‹ï¼ˆå¦‚ gemini-2.5-proï¼‰
- max_tokens è¨­å®šéé«˜
- ç¶²è·¯å»¶é²

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// æ”¹ç”¨æ›´å¿«çš„æ¨¡å‹
model: 'google/gemini-2.5-flash-lite'

// é™ä½ max_tokens
max_tokens: 1000

// åŠ å…¥ timeout
const controller = new AbortController();
const timeout = setTimeout(() => controller.abort(), 30000); // 30ç§’

const response = await fetch(API_URL, {
  signal: controller.signal,
  ...
});
clearTimeout(timeout);
```

### å•é¡Œ 2ï¼šAI è¼¸å‡ºä¸ç¬¦åˆé æœŸ

**å¯èƒ½åŸå› **ï¼š
- Prompt è¨­è¨ˆä¸ä½³
- temperature è¨­å®šä¸ç•¶
- ç¼ºå°‘å“ç‰Œä¸Šä¸‹æ–‡

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// æ›´æ˜ç¢ºçš„ Prompt
const improvedPrompt = `è«‹åš´æ ¼éµå®ˆä»¥ä¸‹æ ¼å¼ç”Ÿæˆå…§å®¹ï¼š

ã€æ¨™é¡Œã€‘ï¼ˆä¸è¶…é 20 å­—ï¼‰
ã€å…§å®¹ã€‘ï¼ˆ150-200 å­—ï¼‰
ã€Hashtagsã€‘ï¼ˆ3-5 å€‹ï¼‰

å…§å®¹è¦æ±‚ï¼š
- å¿…é ˆåŒ…å«é—œéµå­—ã€Œ${keywords}ã€
- èªèª¿ç‚ºã€Œ${tone}ã€
- é©åˆã€Œ${platform}ã€å¹³å°
- ä¸è¦ä½¿ç”¨å¤ªå¤šè¡¨æƒ…ç¬¦è™Ÿ
- ä½¿ç”¨ç¹é«”ä¸­æ–‡

ç¾åœ¨è«‹é–‹å§‹ç”Ÿæˆï¼š`;

// é™ä½ temperature æé«˜ç©©å®šæ€§
temperature: 0.5
```

### å•é¡Œ 3ï¼šAPI Key ç„¡æ•ˆ

**æª¢æŸ¥æ­¥é©Ÿ**ï¼š
```bash
# 1. ç¢ºèª secret å·²è¨­å®š
supabase secrets list

# 2. æŸ¥çœ‹ function logs
supabase functions logs generate-content

# 3. é‡æ–°è¨­å®š secret
supabase secrets set LOVABLE_API_KEY=your_new_key
```

---

## ğŸ“ˆ å„ªåŒ–å»ºè­°

### 1. å¯¦ä½œå¿«å–æ©Ÿåˆ¶

```typescript
// ç›¸ä¼¼çš„è«‹æ±‚å¯ä»¥å¿«å–çµæœ
const cacheKey = `${keywords}_${platform}_${contentType}`;
const cached = await redis.get(cacheKey);

if (cached) {
  return cached;
}

// ç”Ÿæˆæ–°å…§å®¹...
await redis.set(cacheKey, result, { ex: 3600 }); // å¿«å– 1 å°æ™‚
```

### 2. æ‰¹æ¬¡è™•ç†

```typescript
// ä¸€æ¬¡ç”Ÿæˆå¤šå€‹è®Šé«”
const prompts = [
  generatePrompt({ tone: 'å°ˆæ¥­' }),
  generatePrompt({ tone: 'è¼•é¬†' }),
  generatePrompt({ tone: 'å¹½é»˜' })
];

const results = await Promise.all(
  prompts.map(prompt => callAI(prompt))
);
```

### 3. ä¸²æµå›æ‡‰

```typescript
// ä½¿ç”¨ streaming æå‡ä½¿ç”¨è€…é«”é©—
const stream = await openai.chat.completions.create({
  model: "gpt-4",
  messages: [{ role: "user", content: prompt }],
  stream: true
});

for await (const chunk of stream) {
  const content = chunk.choices[0]?.delta?.content;
  if (content) {
    // å³æ™‚å‚³é€çµ¦å‰ç«¯
    sendToClient(content);
  }
}
```

---

**æœ€å¾Œæ›´æ–°**ï¼š2025 å¹´ 11 æœˆ 5 æ—¥
